Hello Team,

We are still facing a critical attendance sync issue even after multiple fixes.

ğŸ”´ Current Behavior (Actual Result)

Student clicks â€œJoin Live Classâ€

Telegram link opens correctly âœ…

Student portal shows success message:

â€œà¦¹à¦¾à¦œà¦¿à¦°à¦¾ à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦¹à¦¯à¦¼à§‡à¦›à§‡â€ âœ…

BUT attendance does NOT reflect in:

âŒ Admin Dashboard â†’ Attendance (Today)

âŒ Student Dashboard â†’ My Attendance

âŒ Present count, percentage remain unchanged

I have attached screenshots from:

Student Attendance page (shows 0)

Admin Attendance page (student not marked Present)

Live class join success flow

ğŸŸ¢ Expected Behavior (Required)

When student clicks Join Live Class:

Telegram opens âœ…

Attendance must be auto-marked as Present

Attendance must reflect immediately in:

Admin Panel â†’ Attendance â†’ Today

Student Panel â†’ Attendance stats (Present, %)

Student should appear as:

Status: Present
Marked via: live_class

ğŸ” What We Already Know (Confirmed)

Attendance record IS being written (success message proves it)

But dashboards do not read it

This indicates a schema / query mismatch, not a UI issue

Previously fixed:

student_id â†’ person_id

Added: person_name, type, class_id

Still NOT visible

âš ï¸ Strong Suspicion (Please Verify)

One or more of the following is still wrong:

Date mismatch

Attendance saved in UTC

Admin dashboard filtering by local date (Asia/Dhaka)

Collection mismatch

Attendance saved in attendance

Dashboard reading from different collection or filter

Missing required filter fields
Admin attendance query expects:

type = "student"

class_id

date

tenant_id
One of these is still not matching exactly

Dashboard aggregation cache

Stats (Present / Absent / %) not recalculated after live join

âœ… What We Need Now (Action Items)

Please do all of the following:

Log the exact attendance document created when joining live class

Compare it with a manually marked attendance (from Admin panel)

Ensure both documents are 100% identical in structure

Fix dashboard queries to include:

marked_via = "live_class"

Force refresh / recalc attendance stats after join

ğŸš¨ This Is a Blocking Issue

This feature is core to the system:

Live Class â†’ Attendance automation is a key selling point

Currently it looks successful but is functionally broken

Please do not mark this as resolved until:

Student joins live class

Admin dashboard shows student as Present

Student dashboard updates stats immediately

Waiting for a final confirmed fix, not partial updates.

Thanks,
Farid
(MaxTech BD)